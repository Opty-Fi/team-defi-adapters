{
  "title": "Gas fees owed to operator",
  "description": "Test cases for gas fees owed to operator in Vault contracts",
  "usedTokens": ["dai"],
  "stories": [
    {
      "description": "Gas owed to operator should be reset to zero when the operator rebalances again",
      "setActions": [
        {
          "contract": "",
          "action": "fundWallet",
          "args": {
            "amount": "1000"
          },
          "executor": "operator",
          "expect": "success",
          "message": ""
        },
        {
          "contract": "erc20",
          "action": "approve(address,uint256)",
          "args": {
            "contractName": "vault",
            "amount": "1000"
          },
          "executor": "operator",
          "expect": "success",
          "message": ""
        },
        {
          "contract": "registry",
          "action": "approveLiquidityPool(address)",
          "args": {},
          "executor": "",
          "expect": "success",
          "message": ""
        },
        {
          "contract": "registry",
          "action": "setLiquidityPoolToAdapter(address,address)",
          "args": {},
          "executor": "operator",
          "expect": "success",
          "message": ""
        },
        {
          "contract": "investStrategyRegistry",
          "action": "setStrategy(bytes32,(address,address,bool)[])",
          "args": {},
          "executor": "",
          "expect": "success",
          "message": ""
        },
        {
          "contract": "registry",
          "action": "rateLiquidityPool(address,uint8)",
          "args": {
            "score": 1
          },
          "executor": "",
          "expect": "success",
          "message": ""
        },
        {
          "contract": "strategyProvider",
          "action": "setBestStrategy(uint256,bytes32,bytes32)",
          "args": {},
          "executor": "",
          "expect": "success",
          "message": ""
        },
        {
          "contract": "vault",
          "action": "userDeposit(uint256)",
          "args": {
            "amount": "1000"
          },
          "executor": "operator",
          "expect": "success",
          "message": ""
        },
        {
          "contract": "vault",
          "action": "rebalance()",
          "args": {},
          "expect": "success",
          "message": ""
        },
        {
          "contract": "registry",
          "action": "approveLiquidityPool(address)",
          "args": {},
          "executor": "operator",
          "expect": "success",
          "message": ""
        },
        {
          "contract": "registry",
          "action": "setLiquidityPoolToAdapter(address,address)",
          "args": {},
          "executor": "operator",
          "expect": "success",
          "message": ""
        },
        {
          "contract": "investStrategyRegistry",
          "action": "setStrategy(bytes32,(address,address,bool)[])",
          "args": {},
          "executor": "",
          "expect": "success",
          "message": ""
        },
        {
          "contract": "registry",
          "action": "rateLiquidityPool(address,uint8)",
          "args": {
            "score": 2
          },
          "executor": "operator",
          "expect": "success",
          "message": ""
        },
        {
          "contract": "strategyProvider",
          "action": "setBestStrategy(uint256,bytes32,bytes32)",
          "args": {},
          "executor": "operator",
          "expect": "success",
          "message": ""
        },
        {
          "contract": "vault",
          "action": "rebalance()",
          "args": {},
          "executor": "operator",
          "expect": "success",
          "message": ""
        }
      ],
      "getActions": [
        {
          "contract": "vault",
          "action": "gasOwedToOperator()",
          "args": {},
          "expectedValue": ""
        }
      ]
    }
  ]
}
